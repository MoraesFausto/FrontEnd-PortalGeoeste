{"ast":null,"code":"import _regeneratorRuntime from\"/home/f4ustx/cnpq/Portal_Geoeste/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/f4ustx/cnpq/Portal_Geoeste/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{PublicationForm}from\"../components/Forms/CRUD/PublicationForm\";import api from\"../services/api\";import{jsx as _jsx}from\"react/jsx-runtime\";function onSubmit(_x){return _onSubmit.apply(this,arguments);}function _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(props){var _props$publication,_props$publication2,_props$publication3,_props$publication4,_props$publication5,_props$publication6,_props$publication7,_props$publication8,formData,publication_payload;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!props.file||!props.publication)){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.prev=2;formData=new FormData();formData.append('file',props.file);publication_payload={pub_title:(_props$publication=props.publication)===null||_props$publication===void 0?void 0:_props$publication.pub_title,pub_desc:(_props$publication2=props.publication)===null||_props$publication2===void 0?void 0:_props$publication2.pub_desc,pub_authors:(_props$publication3=props.publication)===null||_props$publication3===void 0?void 0:_props$publication3.pub_authors,pub_date:(_props$publication4=props.publication)===null||_props$publication4===void 0?void 0:_props$publication4.pub_date,pub_link:(_props$publication5=props.publication)===null||_props$publication5===void 0?void 0:_props$publication5.pub_link,pub_type:(_props$publication6=props.publication)===null||_props$publication6===void 0?void 0:_props$publication6.pub_type,pub_number_of_pages:(_props$publication7=props.publication)===null||_props$publication7===void 0?void 0:_props$publication7.pub_number_of_pages,pub_keywords:(_props$publication8=props.publication)===null||_props$publication8===void 0?void 0:_props$publication8.pub_keywords};formData.append('request',JSON.stringify(publication_payload));_context.next=9;return api.post('/api/Data/publications',formData,{headers:{'Content-Type':'multipart/form-data',authorization:\"Bearer \".concat(props.token)}});case 9:window.location.href='/publicacoes';_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);return _context.abrupt(\"return\");case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,12]]);}));return _onSubmit.apply(this,arguments);}function onCancel(){return _onCancel.apply(this,arguments);}function _onCancel(){_onCancel=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:window.location.href='/publicacoes';case 1:case\"end\":return _context2.stop();}}},_callee2);}));return _onCancel.apply(this,arguments);}export var PublicationUpload=function PublicationUpload(_ref){var token=_ref.token;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(PublicationForm,{token:token,onSubmit:onSubmit,onCancel:onCancel})});};","map":{"version":3,"names":["PublicationForm","api","onSubmit","props","file","publication","formData","FormData","append","publication_payload","pub_title","pub_desc","pub_authors","pub_date","pub_link","pub_type","pub_number_of_pages","pub_keywords","JSON","stringify","post","headers","authorization","token","window","location","href","onCancel","PublicationUpload"],"sources":["/home/f4ustx/cnpq/Portal_Geoeste/client/src/pages/PublicationUpload.tsx"],"sourcesContent":["import { PublicationForm } from \"../components/Forms/CRUD/PublicationForm\"\nimport { onSubmitProps } from \"../interfaces\"\nimport api from \"../services/api\";\n\nasync function onSubmit(props: onSubmitProps) {\n    if (!props.file || !props.publication) {\n        return;\n    }\n\n    try{\n        const formData = new FormData();\n        formData.append('file', props.file);\n        const publication_payload ={\n            pub_title: props.publication?.pub_title,\n            pub_desc: props.publication?.pub_desc,\n            pub_authors: props.publication?.pub_authors,\n            pub_date: props.publication?.pub_date,\n            pub_link: props.publication?.pub_link,\n            pub_type: props.publication?.pub_type,\n            pub_number_of_pages: props.publication?.pub_number_of_pages,\n            pub_keywords: props.publication?.pub_keywords,\n        }\n\n        formData.append('request', JSON.stringify(publication_payload));\n        \n        await api.post('/api/Data/publications', formData, {\n            headers:{\n                'Content-Type': 'multipart/form-data',\n                authorization: `Bearer ${props.token}`\n            }\n        });\n        window.location.href='/publicacoes';\n\n    } catch (err) {\n        return;\n    }\n}\n\nasync function onCancel() {\n    window.location.href='/publicacoes';\n}\n\n\nexport const PublicationUpload = ({token}) => {\n\n    return(\n        <div>\n            <PublicationForm {...{token, onSubmit, onCancel}}/>\n        </div>\n    )\n}"],"mappings":"0QAAA,OAASA,eAAT,KAAgC,0CAAhC,CAEA,MAAOC,IAAP,KAAgB,iBAAhB,C,mDAEeC,S,sIAAf,iBAAwBC,KAAxB,yTACQ,CAACA,KAAK,CAACC,IAAP,EAAe,CAACD,KAAK,CAACE,WAD9B,kFAMcC,QANd,CAMyB,GAAIC,SAAJ,EANzB,CAOQD,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwBL,KAAK,CAACC,IAA9B,EACMK,mBARd,CAQmC,CACvBC,SAAS,qBAAEP,KAAK,CAACE,WAAR,6CAAE,mBAAmBK,SADP,CAEvBC,QAAQ,sBAAER,KAAK,CAACE,WAAR,8CAAE,oBAAmBM,QAFN,CAGvBC,WAAW,sBAAET,KAAK,CAACE,WAAR,8CAAE,oBAAmBO,WAHT,CAIvBC,QAAQ,sBAAEV,KAAK,CAACE,WAAR,8CAAE,oBAAmBQ,QAJN,CAKvBC,QAAQ,sBAAEX,KAAK,CAACE,WAAR,8CAAE,oBAAmBS,QALN,CAMvBC,QAAQ,sBAAEZ,KAAK,CAACE,WAAR,8CAAE,oBAAmBU,QANN,CAOvBC,mBAAmB,sBAAEb,KAAK,CAACE,WAAR,8CAAE,oBAAmBW,mBAPjB,CAQvBC,YAAY,sBAAEd,KAAK,CAACE,WAAR,8CAAE,oBAAmBY,YARV,CARnC,CAmBQX,QAAQ,CAACE,MAAT,CAAgB,SAAhB,CAA2BU,IAAI,CAACC,SAAL,CAAeV,mBAAf,CAA3B,EAnBR,sBAqBcR,IAAG,CAACmB,IAAJ,CAAS,wBAAT,CAAmCd,QAAnC,CAA6C,CAC/Ce,OAAO,CAAC,CACJ,eAAgB,qBADZ,CAEJC,aAAa,kBAAYnB,KAAK,CAACoB,KAAlB,CAFT,CADuC,CAA7C,CArBd,QA2BQC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqB,cAArB,CA3BR,uL,mDAkCeC,S,oIAAf,0IACIH,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqB,cAArB,CADJ,wD,2CAKA,MAAO,IAAME,kBAAiB,CAAG,QAApBA,kBAAoB,MAAa,IAAXL,MAAW,MAAXA,KAAW,CAE1C,mBACI,kCACI,KAAC,eAAD,EAAsBA,KAAK,CAALA,KAAtB,CAA6BrB,QAAQ,CAARA,QAA7B,CAAuCyB,QAAQ,CAARA,QAAvC,EADJ,EADJ,CAKH,CAPM"},"metadata":{},"sourceType":"module"}