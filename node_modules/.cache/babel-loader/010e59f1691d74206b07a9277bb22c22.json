{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport api from \"../services/api\";\nexport function Auth(url, options) {\n  _s();\n\n  const [user, setUser] = useState(null);\n  const [check, setCheck] = useState(true);\n  const [err, setErr] = useState(true);\n  useEffect(() => {\n    (async () => {\n      try {\n        const res = await api.get('/api/perfil');\n        if (res.data) setUser(res.data);\n        setErr(false);\n      } catch (err) {\n        setCheck(false);\n      }\n    })();\n  }, []);\n  return {\n    user,\n    err,\n    check\n  };\n}\n\n_s(Auth, \"Lb+N/mA7KsHtH9rnPlqOpw7ai6E=\");\n\n_c = Auth;\nexport async function logoutUser(token) {\n  var _user;\n\n  await api.post(\"/api/logout\", {\n    headers: {\n      authorization: \"Bearer \" + ((_user = user) === null || _user === void 0 ? void 0 : _user.token)\n    }\n  });\n  window.location.href = '/';\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"names":["useEffect","useState","api","Auth","url","options","user","setUser","check","setCheck","err","setErr","res","get","data","logoutUser","token","post","headers","authorization","window","location","href"],"sources":["/home/f4ustx/cnpq/Portal_Geoeste/client/src/hooks/useAuth.ts"],"sourcesContent":["import { AxiosRequestConfig } from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { User } from \"../interfaces\";\nimport  api  from \"../services/api\";\n\nexport function Auth<User>(url:string, options?:AxiosRequestConfig){\n    const [user, setUser] = useState<User | null>(null);\n    const [check, setCheck] = useState(true);\n    const [err, setErr] = useState(true);\n\n    useEffect(()=>{\n        (async () =>{\n            try{\n                const res = await api.get('/api/perfil');\n                if(res.data)\n                    setUser(res.data);\n                setErr(false);\n\n            }catch(err){\n                setCheck(false);\n            }\n\n        })();\n    },[]);\n    return { user, err, check }\n}\n\nexport async function logoutUser(token: string){\n    await api.post(\"/api/logout\", {\n      headers: {\n        authorization: \"Bearer \" + user?.token,\n      },\n    });\n    window.location.href='/'\n}"],"mappings":";;AACA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AAEA,OAAQC,GAAR,MAAkB,iBAAlB;AAEA,OAAO,SAASC,IAAT,CAAoBC,GAApB,EAAgCC,OAAhC,EAA4D;EAAA;;EAC/D,MAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBN,QAAQ,CAAc,IAAd,CAAhC;EACA,MAAM,CAACO,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,CAAC,IAAD,CAAlC;EACA,MAAM,CAACS,GAAD,EAAMC,MAAN,IAAgBV,QAAQ,CAAC,IAAD,CAA9B;EAEAD,SAAS,CAAC,MAAI;IACV,CAAC,YAAW;MACR,IAAG;QACC,MAAMY,GAAG,GAAG,MAAMV,GAAG,CAACW,GAAJ,CAAQ,aAAR,CAAlB;QACA,IAAGD,GAAG,CAACE,IAAP,EACIP,OAAO,CAACK,GAAG,CAACE,IAAL,CAAP;QACJH,MAAM,CAAC,KAAD,CAAN;MAEH,CAND,CAMC,OAAMD,GAAN,EAAU;QACPD,QAAQ,CAAC,KAAD,CAAR;MACH;IAEJ,CAXD;EAYH,CAbQ,EAaP,EAbO,CAAT;EAcA,OAAO;IAAEH,IAAF;IAAQI,GAAR;IAAaF;EAAb,CAAP;AACH;;GApBeL,I;;KAAAA,I;AAsBhB,OAAO,eAAeY,UAAf,CAA0BC,KAA1B,EAAwC;EAAA;;EAC3C,MAAMd,GAAG,CAACe,IAAJ,CAAS,aAAT,EAAwB;IAC5BC,OAAO,EAAE;MACPC,aAAa,EAAE,sBAAYb,IAAZ,0CAAY,MAAMU,KAAlB;IADR;EADmB,CAAxB,CAAN;EAKAI,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAqB,GAArB;AACH"},"metadata":{},"sourceType":"module"}