{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport api from \"../services/api\";\nexport function Auth(url, options) {\n  _s();\n\n  const [user, setUser] = useState(null);\n  const [check, setCheck] = useState(true);\n  const [err, setErr] = useState(true);\n  useEffect(() => {\n    (async () => {\n      try {\n        const res = await api.get('/api/perfil');\n        if (res.data) setUser(res.data);\n        setErr(false);\n      } catch (err) {\n        setCheck(false);\n      }\n    })();\n  }, []);\n  return {\n    user,\n    err,\n    check\n  };\n}\n\n_s(Auth, \"Lb+N/mA7KsHtH9rnPlqOpw7ai6E=\");\n\n_c = Auth;\nexport const logoutUser = async () => {\n  const {\n    user\n  } = Auth('api/perfil');\n  await api.post(\"/api/logout\", {\n    headers: {\n      authorization: \"Bearer \" + (user === null || user === void 0 ? void 0 : user.token)\n    }\n  });\n  window.location.href = '/';\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"names":["useEffect","useState","api","Auth","url","options","user","setUser","check","setCheck","err","setErr","res","get","data","logoutUser","post","headers","authorization","token","window","location","href"],"sources":["/home/f4ustx/cnpq/Portal_Geoeste/client/src/hooks/useAuth.ts"],"sourcesContent":["import { AxiosRequestConfig } from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { User } from \"../interfaces\";\nimport  api  from \"../services/api\";\n\nexport function Auth<User>(url:string, options?:AxiosRequestConfig){\n    const [user, setUser] = useState<User | null>(null);\n    const [check, setCheck] = useState(true);\n    const [err, setErr] = useState(true);\n\n    useEffect(()=>{\n        (async () =>{\n            try{\n                const res = await api.get('/api/perfil');\n                if(res.data)\n                    setUser(res.data);\n                setErr(false);\n\n            }catch(err){\n                setCheck(false);\n            }\n\n        })();\n    },[]);\n    return { user, err, check }\n}\n\nexport const logoutUser = async () =>{\n    const { user } = Auth<User | null>('api/perfil');\n    await api.post(\"/api/logout\", {\n      headers: {\n        authorization: \"Bearer \" + user?.token,\n      },\n    });\n    window.location.href='/'\n}"],"mappings":";;AACA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AAEA,OAAQC,GAAR,MAAkB,iBAAlB;AAEA,OAAO,SAASC,IAAT,CAAoBC,GAApB,EAAgCC,OAAhC,EAA4D;EAAA;;EAC/D,MAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBN,QAAQ,CAAc,IAAd,CAAhC;EACA,MAAM,CAACO,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,CAAC,IAAD,CAAlC;EACA,MAAM,CAACS,GAAD,EAAMC,MAAN,IAAgBV,QAAQ,CAAC,IAAD,CAA9B;EAEAD,SAAS,CAAC,MAAI;IACV,CAAC,YAAW;MACR,IAAG;QACC,MAAMY,GAAG,GAAG,MAAMV,GAAG,CAACW,GAAJ,CAAQ,aAAR,CAAlB;QACA,IAAGD,GAAG,CAACE,IAAP,EACIP,OAAO,CAACK,GAAG,CAACE,IAAL,CAAP;QACJH,MAAM,CAAC,KAAD,CAAN;MAEH,CAND,CAMC,OAAMD,GAAN,EAAU;QACPD,QAAQ,CAAC,KAAD,CAAR;MACH;IAEJ,CAXD;EAYH,CAbQ,EAaP,EAbO,CAAT;EAcA,OAAO;IAAEH,IAAF;IAAQI,GAAR;IAAaF;EAAb,CAAP;AACH;;GApBeL,I;;KAAAA,I;AAsBhB,OAAO,MAAMY,UAAU,GAAG,YAAW;EACjC,MAAM;IAAET;EAAF,IAAWH,IAAI,CAAc,YAAd,CAArB;EACA,MAAMD,GAAG,CAACc,IAAJ,CAAS,aAAT,EAAwB;IAC5BC,OAAO,EAAE;MACPC,aAAa,EAAE,aAAYZ,IAAZ,aAAYA,IAAZ,uBAAYA,IAAI,CAAEa,KAAlB;IADR;EADmB,CAAxB,CAAN;EAKAC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAqB,GAArB;AACH,CARM"},"metadata":{},"sourceType":"module"}