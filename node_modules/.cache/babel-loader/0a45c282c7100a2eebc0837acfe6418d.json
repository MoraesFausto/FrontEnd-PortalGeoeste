{"ast":null,"code":"import _regeneratorRuntime from\"/home/f4ustx/cnpq/Portal_Geoeste/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/f4ustx/cnpq/Portal_Geoeste/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/f4ustx/cnpq/Portal_Geoeste/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import api from\"../services/api\";export function Auth(url,options){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),check=_useState4[0],setCheck=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),err=_useState6[0],setErr=_useState6[1];useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.get('/api/Auth/perfil');case 3:res=_context.sent;if(res.data){setUser(res.data);}setErr(false);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);setCheck(false);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}))();},[]);return{user:user,err:err,check:check};}export var logoutUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return api.post('/api/logout');case 2:window.location.href='/';case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function logoutUser(){return _ref2.apply(this,arguments);};}();","map":{"version":3,"names":["useEffect","useState","api","Auth","url","options","user","setUser","check","setCheck","err","setErr","get","res","data","logoutUser","post","window","location","href"],"sources":["/home/f4ustx/cnpq/Portal_Geoeste/client/src/hooks/useAuth.ts"],"sourcesContent":["import { AxiosRequestConfig } from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport  api  from \"../services/api\";\n\nexport function Auth<User>(url:string, options?:AxiosRequestConfig){\n    const [user, setUser] = useState<User | null>(null);\n    const [check, setCheck] = useState(true);\n    const [err, setErr] = useState(true);\n\n    useEffect(()=>{\n        (async () =>{\n            try{\n                const res = await api.get('/api/Auth/perfil');\n                if(res.data){\n                    setUser(res.data);\n                }\n                setErr(false);\n\n            }catch(err){\n                setCheck(false);\n            }\n\n        })();\n    },[]);\n    return { user, err, check }\n}\n\nexport const logoutUser = async () =>{\n    await api.post('/api/logout');\n    window.location.href='/'\n}"],"mappings":"uYACA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAQC,IAAR,KAAkB,iBAAlB,CAEA,MAAO,SAASC,KAAT,CAAoBC,GAApB,CAAgCC,OAAhC,CAA4D,CAC/D,cAAwBJ,QAAQ,CAAc,IAAd,CAAhC,wCAAOK,IAAP,eAAaC,OAAb,eACA,eAA0BN,QAAQ,CAAC,IAAD,CAAlC,yCAAOO,KAAP,eAAcC,QAAd,eACA,eAAsBR,QAAQ,CAAC,IAAD,CAA9B,yCAAOS,GAAP,eAAYC,MAAZ,eAEAX,SAAS,CAAC,UAAI,CACV,0DAAC,mLAEyBE,IAAG,CAACU,GAAJ,CAAQ,kBAAR,CAFzB,QAEaC,GAFb,eAGO,GAAGA,GAAG,CAACC,IAAP,CAAY,CACRP,OAAO,CAACM,GAAG,CAACC,IAAL,CAAP,CACH,CACDH,MAAM,CAAC,KAAD,CAAN,CANP,+EASOF,QAAQ,CAAC,KAAD,CAAR,CATP,oEAAD,KAaH,CAdQ,CAcP,EAdO,CAAT,CAeA,MAAO,CAAEH,IAAI,CAAJA,IAAF,CAAQI,GAAG,CAAHA,GAAR,CAAaF,KAAK,CAALA,KAAb,CAAP,CACH,CAED,MAAO,IAAMO,WAAU,6FAAG,iKAChBb,IAAG,CAACc,IAAJ,CAAS,aAAT,CADgB,QAEtBC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqB,GAArB,CAFsB,wDAAH,kBAAVJ,WAAU,2CAAhB"},"metadata":{},"sourceType":"module"}