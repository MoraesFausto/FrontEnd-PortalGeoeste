{"ast":null,"code":"var _jsxFileName = \"/home/f4ustx/cnpq/Portal_Geoeste/client/src/components/Button/DownloadFile.tsx\";\nimport axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { DateTime } from \"luxon\";\nimport { useDownload } from \"../../hooks/useDownload\";\nimport { Button, ButtonState } from \"./Button\";\nimport { Alert, Container } from \"react-bootstrap\";\nimport { DownloadBtn } from \"./style\";\nimport { Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Download(_ref) {\n  var _s = $RefreshSig$();\n\n  let {\n    param: id,\n    p: pos\n  } = _ref;\n  const path = \"/api/Data/mapas/\" + String(id) + \"/download\";\n\n  const DownloadFile = () => {\n    _s();\n\n    const [buttonState, setButtonState] = useState(ButtonState.Primary);\n    const [showAlert, setShowAlert] = useState(false);\n\n    const preDownloading = () => setButtonState(ButtonState.Loading);\n\n    const postDownloading = () => setButtonState(ButtonState.Primary);\n\n    const onErrorDownloadFile = () => {\n      setButtonState(ButtonState.Primary);\n      setShowAlert(true);\n      setTimeout(() => {\n        setShowAlert(false);\n      }, 3000);\n    };\n\n    const getFileName = () => {\n      return DateTime.local().toISODate() + String(id) + \".zip\";\n    };\n\n    const downloadFile = () => {\n      // throw new Error(\"uncomment this line to mock failure of API\");\n      return axios.get(path, {\n        responseType: \"blob\"\n        /* \n        headers: {\n          Authorization: \"Bearer <token>\", // add authentication information as required by the backend APIs.\n        },\n         */\n\n      });\n    };\n\n    const {\n      ref,\n      url,\n      download,\n      name\n    } = useDownload({\n      apiDefinition: downloadFile,\n      preDownloading,\n      postDownloading,\n      onError: onErrorDownloadFile,\n      getFileName\n    });\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"mt-5\",\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        show: showAlert,\n        children: /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(DownloadBtn, {\n        p: pos,\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: url,\n          download: name,\n          className: \"hidden\",\n          ref: ref\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            label: \"Download\",\n            buttonState: buttonState,\n            onClick: download\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }, this);\n  };\n\n  _s(DownloadFile, \"3ND9IFmlV+NH1firqCg+IpSt5Ag=\", false, function () {\n    return [useDownload];\n  });\n\n  return /*#__PURE__*/_jsxDEV(DownloadFile, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n}\n\n_c = Download;\n;\nexport default Download;\n\nvar _c;\n\n$RefreshReg$(_c, \"Download\");","map":{"version":3,"names":["axios","React","useState","DateTime","useDownload","Button","ButtonState","Alert","Container","DownloadBtn","Navigate","Download","param","id","p","pos","path","String","DownloadFile","buttonState","setButtonState","Primary","showAlert","setShowAlert","preDownloading","Loading","postDownloading","onErrorDownloadFile","setTimeout","getFileName","local","toISODate","downloadFile","get","responseType","ref","url","download","name","apiDefinition","onError"],"sources":["/home/f4ustx/cnpq/Portal_Geoeste/client/src/components/Button/DownloadFile.tsx"],"sourcesContent":["import axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { DateTime } from \"luxon\";\nimport { useDownload } from \"../../hooks/useDownload\";\nimport { Button, ButtonState } from \"./Button\";\nimport { Alert, Container } from \"react-bootstrap\";\nimport { DownloadBtn } from \"./style\";\nimport { Navigate } from \"react-router-dom\";\n\nfunction Download({param:id, p:pos}){\n  const path = \"/api/Data/mapas/\"+ String(id) + \"/download\"\n  const DownloadFile: React.FC = () => {\n  const [buttonState, setButtonState] = useState<ButtonState>(\n    ButtonState.Primary\n  );\n  const [showAlert, setShowAlert] = useState<boolean>(false);\n\n  const preDownloading = () => setButtonState(ButtonState.Loading);\n  const postDownloading = () => setButtonState(ButtonState.Primary);\n\n  const onErrorDownloadFile = () => {\n    setButtonState(ButtonState.Primary);\n    setShowAlert(true);\n    setTimeout(() => {\n      setShowAlert(false);\n    }, 3000);\n  };\n\n  const getFileName = () => {\n    return DateTime.local().toISODate() + String(id) + \".zip\";\n  };\n\n  const downloadFile = () => {\n    // throw new Error(\"uncomment this line to mock failure of API\");\n    return axios.get(\n      path,\n      {\n        responseType: \"blob\",\n        /* \n        headers: {\n          Authorization: \"Bearer <token>\", // add authentication information as required by the backend APIs.\n        },\n         */\n      }\n    );\n  };\n\n  const { ref, url, download, name } = useDownload({\n    apiDefinition: downloadFile,\n    preDownloading,\n    postDownloading,\n    onError: onErrorDownloadFile,\n    getFileName,\n  });\n\n  return (\n    <Container className=\"mt-5\">\n      <Alert variant=\"danger\" show={showAlert}>\n        <Navigate to='/login'/>\n      </Alert>\n      <DownloadBtn p={pos}>\n      <a href={url} download={name} className=\"hidden\" ref={ref} />\n      <div>\n      <Button label=\"Download\" buttonState={buttonState} onClick={download} />\n      </div>\n      </DownloadBtn>\n    </Container>\n  );\n}\nreturn (<DownloadFile/>)\n};\n\nexport default Download;"],"mappings":"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"},"metadata":{},"sourceType":"module"}